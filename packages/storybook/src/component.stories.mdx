import { Meta, Story, Preview } from '@storybook/addon-docs/blocks';
import Reshoot from '@reshoot/react';
import { withKnobs, select, number } from '@storybook/addon-knobs';
import { action } from '@storybook/addon-actions';
import describe from './utils/describe';
import images from './utils/images';

import '@reshoot/react/lib/styles.css';
import './utils/docs.css';

<Meta
  title="Live Demo/Component"
  component={describe(Reshoot, 'Reshoot')}
  decorators={[withKnobs]}
/>

<Preview>
  <Story name="Image Accessible">
    <Reshoot
      style={{
        width: `${number('Width', 480, {
          range: true,
          min: 40,
          max: 1080,
          step: 20,
        })}px`,
      }}
      config={{ ...images[0], alt: `Test image` }}
      onLoad={describe(
        action('Image loaded'),
        '() => {} /* omitted as created by @storybook-addons/action */'
      )}
      onError={describe(
        action('Loading error'),
        '() => {} /* omitted as created by @storybook-addons/action */'
      )}
      onClick={describe(
        action('Clicked'),
        '() => {} /* omitted as created by @storybook-addons/action */'
      )}
      _s={select(
        'State',
        { AUTO: null, MANUAL: 0, OFFLINE: 1, ERROR: 2, INITIAL: 3, LOADED: 5 },
        null
      )}
    />
  </Story>
</Preview>

<Preview>
  <Story name="Image Inaccessible">
    <Reshoot
      style={{
        width: `${number('Width', 480, {
          range: true,
          min: 40,
          max: 1080,
          step: 20,
        })}px`,
      }}
      config={{
        ...images[0],
        src: images[0].src.replace('images', 'error'),
        srcSet: images[0].srcSet.replaceAll('images', 'error'),
        alt: `Test image`,
      }}
      onLoad={describe(
        action('Image loaded'),
        '() => {} /* omitted as created by @storybook-addons/action */'
      )}
      onError={describe(
        action('Loading error'),
        '() => {} /* omitted as created by @storybook-addons/action */'
      )}
      onClick={describe(
        action('Clicked'),
        '() => {} /* omitted as created by @storybook-addons/action */'
      )}
      _s={select(
        'State',
        { AUTO: null, MANUAL: 0, OFFLINE: 1, ERROR: 2, INITIAL: 3, LOADED: 5 },
        null
      )}
    />
  </Story>
</Preview>
